# EDGE: Enriching Knowledge Graph Embeddings with External Text

（使用外部文本丰富知识图谱嵌入）

引入外部文本构建一个知识图谱超图（即知识图谱是其子图）----增强知识图谱，学习超图中的实体嵌入，将此嵌入与原图谱中的实体嵌入对齐，用来做链路预测以及实体分类任务

## 增强知识图谱构建

​     	增强是指向知识图谱中添加新实体的过程，新添加的实体叫做文本实体或文本节点。这些新的实体有一个重要的属性-----它们包含原知识图谱中的实体。这些实体的存在建立给出两个图之间的关系，并且这种关系将被用来学习共享图嵌入。

​        为了构建这个增强图，需要搜集一些关键字来查询对应的文本。具体过程：

1. 找到一批具有相似语义和结构的实体集εe,这一集合用来从WordNet或Wikipedia中查找外部文本S （使用API wikipedia）
2. 从S中提取实体并连接到εe,通过发现新实体连接到旧实体，加强了KG并产生了增强知识图谱

**问题**：由于一段文本中可能出现不同实体，故没有连接的文本实体距离也会很小，这会产生一些噪声，稍后的对齐一步可以处理这一问题

## 联合嵌入空间中的知识图对齐
​       在扩充知识图aKG的帮助下，我们的目标是丰富知识图的嵌入。然而，不可避免的是，一部分新添加的实体是嘈杂的，甚至可能是错误的。为了缓解这个问题，受到了Hinton等人的启发。

​         特别地，我们提出利用图自动编码器提取两个知识图的低维节点嵌入
<img src='https://github.com/modiman/modiman.github.io/blob/gh-pages/docs/_posts/imgs/image-20211115175943950.png?raw=true'/>

## 实验设置

通过实验需要回答的三个问题

* 模型与链路预测当前最佳模型性能差距
* 生成的嵌入与类似方法比较如何
* 增强和对齐各自对模型整体性能的影响

### 任务1 链路预测
<img src='https://github.com/modiman/modiman.github.io/blob/gh-pages/docs/_posts/imgs/image-20211115180514574.png?raw=true'/>

### 任务2 节点分类
<img src='https://github.com/modiman/modiman.github.io/blob/gh-pages/docs/_posts/imgs/image-20211115180642725.png?raw=true'/>

### 任务3 嵌入效果
<img src='https://github.com/modiman/modiman.github.io/blob/gh-pages/docs/_posts/imgs/image-20211115180757214.png?raw=true'/>

**Knowledge Graph Embedding: A Survey of Approaches and Applications**

文章结构 

1. Introduction
2. 基本符号介绍
3. 只利用知识图谱中观察到的事实的嵌入方法
4. 利用额外信息进行嵌入的方法 这些信息包括实体类型 关系路径 文本信息 逻辑规则等等 
5. 进一步探索嵌入在下游任务中的应用,包括：图谱补全、关系提取、问答系统等等

# 3.基于事实的嵌入方法

任务

**将实体和关系嵌入到低维连续向量空间，以此简化知识图谱计算**

一个典型的KG嵌入方法通常包含三步

1. 表示实体和方法

在第一步中，**实体**通常表示为向量，比如向量空间中的确定性点，近期的工作还考虑了不确定的实体，并通过多元高斯分布进行建模

**关系**通常被看做向量空间中的运算，可以表示为向量’、矩阵、张量、高斯分布等，甚至是混合高斯分布



2. 定义打分函数

在第二步中，定义一个打分函数去测量可信度，知识图中出现的三元组倾向于获得更高的分数

3. 学习实体和关系表示

第三步解决优化问题，

本文粗略地将嵌入技术分为两类--**基于平移距离** 和**语义匹配模型**

## 3.1 平移距离模型

平移距离模型利用基于距离的评分函数。它们衡量一个事实的可信性，作为两个实体之间的距离，通常是在翻译完成后的关系

### 3.1.1 TransE及其扩展

**TransE**  最具代表性的距离模型

将实体和联系表示为同一空间下的向量

对于给定的三元组，关系被表示为向量r，由此实体h和t通过r以较小的误差连接，这一灵感来自“Linguistic regularities in continuous space word representations，这篇文章通过学习分布式词汇表征来捕捉语言规律

打分函数被定义为h+r和t之间的距离

​                             f = -||h+r-t||<sub>1/2</sub>



TransE已经开源为python库，可以通过pip install ampligraph安装，具体使用方法见github中的文档

尽管TransE简单高效，但它在处理1-to-N、N-to-1和N-to-N关系方面存在缺陷，例如

对于给定的三元组  <上海，直辖市，中国>以及<重庆，直辖市，中国>,由于关系与尾实体相同，模型学习到的上海与重庆的向量是近似甚至相等的，为了克服这一缺陷，一个可行的策略是允许实体在不同的关系中拥有不同的表示。出现了 **TranH **

 **TranH **

* 克服TransE在处理一对多、多对一、多对多等问题时的缺陷
* 提出一个Trick减少假阴性标签的可能性

它将一个关系解释为超平面上的平移操作。在TransH中，每个关系由两个向量表征，超平面的范数向量(wr)和超平面上的平移向量(dr)。

对于三元组，h和t在超平面上的投影应该由平移向量dr以较小的误差连接，这一方法在保证与TransE具有相同复杂度的同时克服了其缺陷

* If (h, r, t) ∈ ∆ and (t, r, h) ∈ ∆, i.e., r is a reflexive map,then r = 0 and h = t.
* If ∀i ∈ {0, . . . , m},(hi, r, t) ∈ ∆, i.e., r is a many-to-one map, then h0= . . . = hm. Similarly, if ∀i,(h, r, ti) ∈ ∆,
  i.e., r is a one-to-many map, then t0= . . . = tm.

![image-20211028212105792](H:\gitfile\modiman.github.io\docs\_posts\imgs\image-20211028212105792.png)



虚线平行四边形是一个超平面wr

**h和t是一个点而非线(或者说与原点连接组成向量)，因此在超平面wr中的投影即为点，将这两个投影得到的点连接就形成了平移向量dr**



带上标的范数表示幂运算

通过限制||wr||<sub>2</sub>=1，很容易得到

![image-20211028213707808](H:\gitee\notes\论文阅读\imgs\image-20211028213707808.png)

（可以根据直线与平面的向量表示推出）

因此打分函数为

![image-20211028213748216](H:\gitee\notes\论文阅读\imgs\image-20211028213748216.png)





![image-20211028213345153](H:\gitee\notes\论文阅读\imgs\image-20211028213345153.png)

![image-20211028213517264](.\imgs\image-20211028213517264.png)
