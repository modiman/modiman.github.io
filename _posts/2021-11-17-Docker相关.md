## 基本操作

https://www.runoob.com/docker/docker-container-usage.html

## 注意

* **在启动容器时如果加上参数--rm,容器停止时会被删除**

### 启动

```shell
systemctl daemon-reload
#启动
systemctl start docker
# 关闭
systemctl stop docker
#重启docker服务
systemctl restart docker
```

### 镜像

```shell
docker images # 镜像列表

docker search 镜像名 # 搜索镜像

docker pull 镜像名 # 拉取镜像

docker run tomcat # 运行镜像，实际步骤是创建一个镜像的容器并运行而非运行镜像

docker rmi -f 镜像名/镜像ID# 删除镜像

docker save 镜像名/镜像ID -o 镜像保存在哪个位置与名字 #保存镜像

docker load -i 镜像保存文件位置 #加载镜像

```

### 容器

```shell
docker ps # 运行中容器列表

docker ps -a # 运行中+停止运行列表

docker run -it -d --name 要取的别名 镜像名:Tag /bin/bash  #运行一个容器，-d表示可后台运行

docker stop 容器名/容器ID # 停止容器

docker rm -f 容器名/容器ID # 删除容器

docker exec -it 容器名/容器ID /bin/bash # 进入容器
 
```



# 操作MongoDB

## 启动

#### 初次启动（--volume可以将数据持久化）

```bash
docker run   --name=maring  --publish=27017:27017    --volume=/home/modige/mongodata:/data   -d mongo
```

#### 启动现有

```bash
docker start maring
```

#### 慎用，删除以前数据

```bash
docker run   --name=maring  --publish=27017:27017    --volume=/home/modige/mongodata:/data   --rm -d mongo
```

## 恢复数据

docker容器下的数据存放在根目录下的data中

1. 将数据复制到容器内

```bash
docker cp marine_kg/  mongo:\data # 只能从本机复制，不能远程
# marine_kg：本地路径    mongo:容器名     data:容器内地址
```

2. 恢复

```bash
root@08968db2daf7:/data# mongorestore -d marine_kg marine_kg/
```

## 操作hadoop

每次启动hadoop集群时要指定网络，不然会出错





# 远程访问docker

### 配置Docker，开启远程访问

1、修改/lib/systemd/system/docker.service文件

```
vim /lib/systemd/system/docker.service
```

在`ExecStart`后面追加 `-H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock`

2、重新加载配置文件，重启docker，使得刚才的配置生效

```shell
#重新加载配置文件
systemctl daemon-reload
#启动
systemctl start docker
# 关闭
systemctl stop docker
#重启docker服务
systemctl restart docker
```

3、使用curl命令检查是否开启

```
#curl下载docker的服务信息
curl http://127.0.0.1:2375/info
```

## idea中配置



